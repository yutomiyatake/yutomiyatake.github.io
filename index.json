
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    [{"authors":null,"categories":null,"content":"Biography I am an associate professor at D3 Center, Osaka University.\nMy research interests are in applied mathematics, especially in:\nnumerical analysis of differential equations, espacially Geometric Integration numerical linear algebra including continuous optimizations computational uncertainty quantification and their applications to various fields such as science, engineering and informatics 自己紹介 大阪大学 D3センター コンピュータ実験科学研究部門 の准教授です．応用数学や数理工学の研究を行っています． 主に微分方程式など連続的な数学的対象に対する数値計算手法の開発とその数学解析，およびそれらの実世界やデータ科学への応用に関心があります．数値計算でお困りの方はぜひご相談ください．\nまた，理学部数学科 や 大学院情報科学研究科情報基礎数学専攻 の学生を受け入れ教育を行っています．宮武を指導教員として希望する方はこちらもご覧ください．\n研究分野 数値解析（特に微分方程式） 数値線形代数 不確実性定量化 連絡先 〒560-0043 大阪府豊中市待兼山町1-32 大阪大学 D3センター 601号室\nヨビノリたくみ さんと対談させていただきました！ ","date":1739753744,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":1739753744,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"","publishdate":"0001-01-01T00:00:00Z","relpermalink":"","section":"authors","summary":"Biography I am an associate professor at D3 Center, Osaka University.\nMy research interests are in applied mathematics, especially in:\nnumerical analysis of differential equations, espacially Geometric Integration numerical linear algebra including continuous optimizations computational uncertainty quantification and their applications to various fields such as science, engineering and informatics 自己紹介 大阪大学 D3センター コンピュータ実験科学研究部門 の准教授です．応用数学や数理工学の研究を行っています． 主に微分方程式など連続的な数学的対象に対する数値計算手法の開発とその数学解析，およびそれらの実世界やデータ科学への応用に関心があります．数値計算でお困りの方はぜひご相談ください．","tags":null,"title":"Yuto Miyatake","type":"authors"},{"authors":[],"categories":null,"content":" Click on the Slides button above to view the built-in slides feature. Slides can be added in a few ways:\nCreate slides using Hugo Blox Builder’s Slides feature and link using slides parameter in the front matter of the talk file Upload an existing slide deck to static/ and link using url_slides parameter in the front matter of the talk file Embed your slides (e.g. Google Slides) or presentation video on this page using shortcodes. Further event details, including page elements such as image galleries, can be added to the body of this page.\n","date":1906549200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1906549200,"objectID":"a8edef490afe42206247b6ac05657af0","permalink":"https://example.com/talk/example-talk/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/talk/example-talk/","section":"event","summary":"An example talk using Hugo Blox Builder's Markdown slides feature.","tags":[],"title":"Example Talk","type":"event"},{"authors":["Yuto Miyatake"],"categories":[],"content":"初めてのアメリカ出張で，珍しい経験をした．\nサンフランシスコでアメリカ国内線に乗り換え． 国際線は予定より早く到着し，乗り継ぎ時間は約4時間あった． しかし，ユナイテッド便が90分遅延し，ようやく搭乗して離陸開始． …と思ったら、（どの程度の速度が出ていたのかは分からないが）急ブレーキ． 先月は海外で飛行機事故が相次いでいたこともあり，10秒ほど不安な時間を過ごす． アナウンスはなく，状況も不明． 欠航になるのか，別の便に振り替えられるのかも分からない． 夜間ということもあり，機体がどこへ向かってタクシングしているのかも分からない．\nしばらくして，駐機場ではない場所で停止． ここでようやくパイロットからアナウンス．「The takeoff was rejected because of …」 仕事柄，「リジェクト（reject）」という単語はよく使うが（使いたくはない），離陸についても使われることを初めて知った． こういう用例は，一生忘れないだろう． 理由は，どうやら前方のドアに問題があったらしい． 機材はB737で，1時間ちょっとのフライトにもかかわらず（たまたま？）パイロットが3人いた． そのうち1人がコクピットから出てきて，問題（？）のドアを内側から10秒ほど確認し，「OKOK」と言ってコクピットに戻る． 外からの確認は特になく，本当に大丈夫なのか…と思っていたら，再び離陸．今度は無事成功． その後のフライトは順調で，目的地のサンディエゴ付近で少し旋回したものの，（結局かなりの遅延の末に）無事到着．\nちなみに，帰国時のサンディエゴ→サンフランシスコ便もやはり遅延． しかしフライト自体は順調だった． ただ，前方のCAさん，着席中ずっと手をたたきながら歌を歌っており，なかなかユニークな人だった．\n","date":1739753744,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1739753744,"objectID":"7b069c215142bb77f03ce69ebb7cbe8e","permalink":"https://example.com/post/rejected_tekeoff/","publishdate":"2025-02-17T09:55:44+09:00","relpermalink":"/post/rejected_tekeoff/","section":"post","summary":"初めてのアメリカ出張で，珍しい経験をした．\n","tags":["trip"],"title":"Rejected Tekeoff","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"最近，行列のCR分解が気に入っている． CR分解とは，行列の簡約化を利用して，その行列を二つの行列の積に分解するものである．\n次の行列を考える： $$A = \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 2 \u0026amp; 6\\cr 3 \u0026amp; 6 \u0026amp; 8 \u0026amp; 24 \\cr 2 \u0026amp; 4 \u0026amp; 4 \u0026amp; 12 \\end{bmatrix}. $$ この行列の簡約化は $$ \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 0 \u0026amp; 0 \\cr 0 \u0026amp; 0 \u0026amp; 1 \u0026amp; 3 \\cr 0 \u0026amp; 0 \u0026amp; 0 \u0026amp; 0 \\end{bmatrix} $$ である．ここで次のように行列$C$, $R$を作る．\n簡約な行列の主成分は1列目と3列目にある．これに対応し，行列$A$の1列目と3列目を抜き出した行列を$C$とする： $$ C = \\begin{bmatrix} 1 \u0026amp; 2 \\cr 3 \u0026amp; 8 \\cr 2 \u0026amp; 4 \\end{bmatrix}. $$ 簡約な行列の主成分のある行を抜き出した行列を$R$とする： $$ R = \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 0 \u0026amp; 0\\cr 0 \u0026amp; 0 \u0026amp; 1 \u0026amp; 3 \\end{bmatrix}. $$ 行列積$CR$を計算すれば， $$ CR = \\begin{bmatrix} 1 \u0026amp; 2 \\cr 3 \u0026amp; 8 \\cr 2 \u0026amp; 4 \\end{bmatrix} \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 0 \u0026amp; 0\\cr 0 \u0026amp; 0 \u0026amp; 1 \u0026amp; 3 \\end{bmatrix} = \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 2 \u0026amp; 6\\cr 3 \u0026amp; 6 \u0026amp; 8 \u0026amp; 24 \\cr 2 \u0026amp; 4 \u0026amp; 4 \u0026amp; 12 \\end{bmatrix} = A $$ となっており，たしかに$A=CR$と分解できていることがわかる． これは偶然ではなく，一般に，行列$A$に対して，上記のように定めた$C$と$R$により$A=CR$と分解できる．\nこのように分解できることは，比較的容易に納得できる． 行列に左から適切な正則行列を掛けることで簡約な行列が得られることに注意すると， この例の場合，ある$3\\times 3$型の正則行列$P$（行基本変形に対応する行列の積）が存在し， $$ PA= \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 0 \u0026amp; 0 \\cr 0 \u0026amp; 0 \u0026amp; 1 \u0026amp; 3 \\cr 0 \u0026amp; 0 \u0026amp; 0 \u0026amp; 0 \\end{bmatrix} $$ と書ける． 行列$P$は正則なので， $$ A = P^{-1} \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 0 \u0026amp; 0 \\cr 0 \u0026amp; 0 \u0026amp; 1 \u0026amp; 3 \\cr 0 \u0026amp; 0 \u0026amp; 0 \u0026amp; 0 \\end{bmatrix} $$ だが，簡約な行列の3行目は零（行）ベクトルであるから，$P^{-1}$の3列目も右辺の行列積には寄与しない． そこで，$P^{-1}$の3列目を省いた$3\\times 2$型行列を$C = [\\mathbf{c}_1,\\mathbf{c}_2]$ と表すことにすれば， $$ A = [\\mathbf{c}_1,\\mathbf{c}_2] \\begin{bmatrix} 1 \u0026amp; 2 \u0026amp; 0 \u0026amp; 0 \\cr 0 \u0026amp; 0 \u0026amp; 1 \u0026amp; 3 \\cr \\end{bmatrix} $$ となるはずである． ここで，右辺の第1列と第3列はそれぞれ$\\mathbf{c}_1$と$\\mathbf{c}_2$だが， 左辺と比べれば，これらはそれぞれ$A$の1列目と3列目に一致するはずである．\n","date":1732853644,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1732853644,"objectID":"80495a5865ffd5101263b95c1e93ba38","permalink":"https://example.com/post/cr/","publishdate":"2024-11-29T13:14:04+09:00","relpermalink":"/post/cr/","section":"post","summary":"最近，行列のCR分解が気に入っている． CR分解とは，行列の簡約化を利用して，その行列を二つの行列の積に分解するものである．\n","tags":["線形代数"],"title":"CR分解","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"8月にフィンランドでエクストリーム・サウナを体験しました．\n滞在中にラッペーンランタで1回，ヘルシンキ近郊で1回サウナを体験しましたが，ここでは，特に印象的だったラッペーンランタでの体験を振り返ります．\nラッペーンランタ大学に滞在中，サウナクラブ（？）の方（数学者）が主催のサウナイベントに誘っていただきました． 場所は，ラッペーンランタ市街地からは車で20〜30分ほど離れたサウナ施設で，夕方くらいに大学を出発しました． 途中，スーパーでバーベキューセットや飲み物を購入し，車で現地へ向かいました． 参加者はおおよそ20人ほどだったと思います．\n到着すると，サウナマスターがスモークサウナの準備を開始．\n同時に，薪に火をいれてバーベキューの準備を進めます． その間に，各々水着に着替えます． バーベキューは屋外ですが，このときの気温は15℃ほど． 数日前まで猛暑の日本にいた私にとっては，かなり寒い気温です．\nまず指示されたことは，まずサイマー湖で頭まで浸かって全身を冷やすことでした． フィンランド人の多くは平然とこなしていましたが， 私ともう一人のアジア系の研究者は凍えていました．\nその後は，数分サウナに入り，外に出てソーセージを食べるという流れを繰り返しながら，みんなで楽しく過ごしていました． このときのサウナが，いわゆるスモークサウナの標準的な楽しみ方だったのだと思います．\n1時間ほど経った頃，「そろそろエクストリーム・サウナ！全員集合！」の号令が！\nなんだか危険な予感がしつつも，それぞれビールやロングドリンクを片手にサウナルームへ（日本人の感覚からするととても危険！）． サウナマスターのスマホから流れるリトアニア（かエストニア）のポップミュージックに合わせて，3〜5秒おきに，「ばっしゃんばっしゃん」とサウナストーンに水が掛けられます． 一瞬にして，サウナルームの特に高い位置の温度が上昇します．\n本能的に耳を抑えます．髪は熱くて触れられず，高温の水蒸気によりすぐに息苦しくなりました． 限界は近づく中，フィンランド人はまだ平然とビールを飲んでいます． それから10秒か20秒ほど経って，隣にいたドイツ人が耐えきれず低い位置へ移動． それを見て私も移動しました． サウナストーンより低い位置は比較的楽でしたが，この時点でまだ高い位置に座っていたフィンランド人たちも徐々に脱落し，その後は，再びサイマー湖へ．\nさらに数十分後…「次はサウナコンペティション！」\nエクストリーム・サウナとは異なり，とにかく高温にして耐えるコンペティションのようでした． 「おそらく室温は120〜130℃くらいになる」，「過去に World Sauna Championships で死亡事故もあった」，というような話もあり， フィンランド人以外は参加せず…\nその後，参加者の一人が車でホテルまで送ってくれました． ホテルの鏡を見てみると，腕や胸部の血管が真っ赤に浮き上がっていました…\nラッペーンランタはロシア国境付近の町で，ヘルシンキから電車で約2時間の場所にあります．ヘルシンキ空港からは，Tikkurila (Vantaa) での乗り換えが必要です． 自然が豊かで，とても気持ちの良い場所でした．天候不良のためサイマー湖のクルーズには行けませんでしたが，サイクリングを楽しみました． また，夏限定とは思いますが，ラッペーンランタの見どころの一つとしてSand Castle（砂の城）があります．\n","date":1731505920,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1731505920,"objectID":"94edbb1ff86b42a85c2f189923d3be1e","permalink":"https://example.com/post/extreme_sauna/","publishdate":"2024-11-13T22:52:00+09:00","relpermalink":"/post/extreme_sauna/","section":"post","summary":"8月にフィンランドでエクストリーム・サウナを体験しました．\n","tags":["trip"],"title":"エクストリーム・サウナ","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"2019年以来5年ぶりの北京出張．手続きや現地の様子など以前と大きく変わっていたこともあったので，その備忘録です．\nビザ 中国に渡航するには，ビザを申請する必要があります．大阪の場合，心斎橋の少し北にある中国ビザ申請センターに，申請時と受取時の2回行くことになります． 待ち時間もそれなりで，平日の朝一で行って，一時間待ちくらい．\n大阪で申請する場合，ウェブサイトで大阪を選択して，申請書を作成しないといけないようです（これは本当かどうかよく分かりませんが，東京か名古屋を選択していて作り直しをさせられていた人がいました） 証明写真は，「耳を出す」とか気をつけることはあるけれど，撮影自体は証明写真機で十分そうです（ビザセンター内にKi-Re-iが設置されていました） ネット環境 ホテル ホテルのWiFiに接続するには，SMSで送られてくるverification codeが必要でした（5年前の別のホテルも同じでした）．ホテルのフロントの人や中国人の知り合いに助けてもらう必要があります． 当然，Google等は使えません．今回気になっていたのはGitHub．GitHub Pagesは問題ないけれど，GitHub自体は繋がったり繋がらなくなったり不安定でした． スマホ 2, 3日の滞在なら，海外ローミングが楽かもしれないけれど，今回は約一週間の滞在だったので，Trip.com経由でeSimを購入． Google等は規制されておらず，ストレスフリーで快適（香港の物理Simでも同様らしい）．テザリングもできるので，VPNを準備していなくても，PCでなんとか仕事はできます（通信料には注意）． アリペイとWeChat アリペイ 日本のクレジットカードとパスポート情報を紐づけると，アリペイでいろいろな決済ができるようになります． 地下鉄やバスも，アリペイでQRコードを表示して乗ることができます（今回試さなかったけれど，クレジットカードのタッチ決済でも乗車可能らしい）． WeChat WeChatペイもたぶん同じように使えそう（アリペイで十分だったので，今回はWeChatペイは使わなかったです） WeChatの絵文字はなかなかかわいい． WeChatのミニプログラムから，いろいろな観光地の予約ができます．ただし，以下の点に注意が必要． 結局，中国の電話番号がないと予約できないものがほとんど．外国人でも予約できそうな雰囲気をだしており，パスポート情報まで入力した後で，中国の電話番号を要求するものが多くてイラッとしました（→とはいえ，現地で簡単にチケット購入できるので，あまり気にしなくてよさそうです）． 天安門広場は，パスポート情報を入力すればミニプログラムから予約可能．（セキュリティは厳しく，時間帯によってはかなり待たされる点は要注意） 故宮博物院（紫禁城）は日本語の予約サイトからも予約可能．（争奪戦なので，予約開始時刻に待機しておくのが安全です） タクシー 相変わらず，タクシーは安いです．DiDiで呼びます．もちろん，地下鉄やバスの方が安いけれど，駅の間隔も結構離れているし，タクシーは大活躍．\n自転車 アリペイやWeChatペイに登録しておけば，シェア自転車を使えるらしいです（街中いたるところにあります）．今回は使わなかったけれど，今度行くことがあれば試してみたい．\n現金？クレジットカード？電子マネー？ 上述の通り，高額な買い物でなければ電子マネーが主流のようです．ただし，（おそらく観光地や観光客が来そうな店などでは）現金も使えるし，一度だけアリペイの決済が弾かれてしまったことがあったので，ある程度の現金は所持しておくと安全そう．一方で，小額な支払いでクレジットカードを出そうとしたら「えっ，まじかよ…」って表情をされたので（空港に到着後，バスのチケットを買うときの話），ホテルの支払いなどを除けば，クレジットカードの出番はあまりなさそうな気がします．\n翻訳アプリ 今回はアリペイの翻訳アプリが大活躍．現地の人も（いろいろな）翻訳アプリを「中国語→英語」で使っていて，精度はなかなか良さそうでした．\n食事 うまい．ただし，食べ過ぎ飲み過ぎには注意．ビールは常温で出てくると困るので，冷たいビールが飲みたいならば，注文時に念押しする必要があります．「冰（ビン）」といえば伝わることが多かったです．ただ，一回，QRコードオーダーで注文したとき，うっかり常温のビールを飲む羽目になってしまいました…\n","date":1731026685,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1731026685,"objectID":"c3e576a7f75531d6a3a28f6c8e6cd533","permalink":"https://example.com/post/beijing2024/","publishdate":"2024-11-08T09:44:45+09:00","relpermalink":"/post/beijing2024/","section":"post","summary":"2019年以来5年ぶりの北京出張．手続きや現地の様子など以前と大きく変わっていたこともあったので，その備忘録です．\n","tags":["trip"],"title":"北京出張の備忘録","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"関数を定義する際，キーワード引数を利用すると便利なことがあります．例えば反復法の終了条件として閾値（例えば最大反復回数や許容誤差）を設定することはよくありますが，デフォルトの値を設定しつつも，関数を呼び出すときに自由に変更できると便利です．キーワード引数は，引数の指定を位置ではなく名前でおこないます．以下，Jiliaにおけるキーワード引数の基本的な使い方を説明します．\n例えば，次の関数では y の値としてデフォルトで 1 が設定されていますが，関数を呼び出すときに，自由に変更することが可能です．\njulia\u0026gt; function f(x;y=1) return x+y end f (generic function with 1 method) julia\u0026gt; f(2) 3 julia\u0026gt; f(2,y=0.1) 2.1 もちろん，型を指定することもできます．\njulia\u0026gt; function g(x;y::Int64=1) return x+y end g (generic function with 1 method) julia\u0026gt; g(2,y=1) 3 julia\u0026gt; g(2,y=0.1) ERROR: TypeError: in keyword argument y, expected Int64, got Float64 Stacktrace: [1] (::getfield(Main, Symbol(\u0026#34;#kw##g\u0026#34;)))(::NamedTuple{(:y,),Tuple{Float64}}, ::typeof(g), ::Int64) at ./none:0 [2] top-level scope at REPL[15]:1 Int64 は 64-bit signed integer type なので，このように小数を代入をしようとするとエラーが起きます．\nまた，キーワード引数が二つ以上ある場合，どの順番で指定しても問題ありません．\njulia\u0026gt; function h(x;y=1,z=2) return x*y+z end h (generic function with 1 method) julia\u0026gt; h(1,z=3) 4 julia\u0026gt; h(1,z=3,y=2) 5 ","date":1643876302,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1643876302,"objectID":"de72ae59ac46e450fcae934c22d4c351","permalink":"https://example.com/post/julia_kwargs/","publishdate":"2022-02-03T17:18:22+09:00","relpermalink":"/post/julia_kwargs/","section":"post","summary":"関数を定義する際，キーワード引数を利用すると便利なことがあります．例えば反復法の終了条件として閾値（例えば最大反復回数や許容誤差）を設定することはよくありますが，デフォルトの値を設定しつつも，関数を呼び出すときに自由に変更できると便利です．キーワード引数は，引数の指定を位置ではなく名前でおこないます．以下，Jiliaにおけるキーワード引数の基本的な使い方を説明します．\n","tags":["Julia"],"title":"関数の定義：キーワード引数","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"科学技術計算では行列ベクトル積が頻繁に登場し，これを効率よく計算することはとても重要です． 行列サイズ $n$ に対して計算量は $\\mathrm{O}(n^2)$ ですが，行列は疎行列（ほとんどの要素が $0$）であることが多く，定義通りに計算すると $0$ を掛けたり足したりする無駄な演算が多く発生してしまいます． 以下では疎行列とベクトルの積の計算について解説します． （もっとも，Juliaで行列ベクトル積 $A\\boldsymbol{b}$ を計算するには A*b と書けばよく，これは $A$ が疎行列の場合でも同様なので，疎行列のパッケージがあることさえ知っていれば実用上は十分なことが多いのですが，とはいえ，チューニングを行ったり，上三角部分など行列の一部とベクトルの積を計算したりしたいときには，疎行列とベクトルの積がどのように計算されているか理解しておくことが重要です．）\nまず，行列 $A$ を適当に定義して，疎行列に変換してみましょう．\njulia\u0026gt; using SparseArrays julia\u0026gt; A = [1 2 5; 0 3 0; 0 4 6] 3×3 Array{Int64,2}: 1 2 5 0 3 0 0 4 6 julia\u0026gt; A = sparse(A) 3×3 SparseMatrixCSC{Int64,Int64} with 6 stored entries: [1, 1] = 1 [1, 2] = 2 [2, 2] = 3 [3, 2] = 4 [1, 3] = 5 [3, 3] = 6 マニュアルによれば，圧縮列格納方式 (CSC) が採用されています．\nstruct SparseMatrixCSC{Tv,Ti\u0026lt;:Integer} \u0026lt;: AbstractSparseMatrix{Tv,Ti} m::Int # Number of rows n::Int # Number of columns colptr::Vector{Ti} # Column i is in colptr[i]:(colptr[i+1]-1) rowval::Vector{Ti} # Row indices of stored values nzval::Vector{Tv} # Stored values, typically nonzeros end 上で定義した行列に対しては，それぞれ以下のようになっています．\njulia\u0026gt; A.m 3 julia\u0026gt; A.n 3 julia\u0026gt; A.colptr 4-element Array{Int64,1}: 1 2 5 7 julia\u0026gt; A.rowval 6-element Array{Int64,1}: 1 1 2 3 1 3 julia\u0026gt; A.nzval 6-element Array{Int64,1}: 1 2 3 4 5 6 さて，行列ベクトル積 $y=Ax$ を計算するためには，定義の通り，\n$$y_i = \\sum_{j=1}^nA_{ij}x_j$$\nをfor文で実装するのが自然ですが，\n疎行列の場合，$0$にアクセスするのは無駄 行列の要素は行ではなく列を基準に格納されている ため，少し工夫する必要があります．例えば，次のように書くのがよいでしょう．\nx = ones(A.n); y = zeros(A.n); for col = 1 : A.n idx = A.colptr[col] for i = idx : (A.colptr[col + 1] - 1) y[A.rowval[i]] += A.nzval[i] * x[col] end end 3重対角行列でテストしてみます．\nusing SparseArrays using LinearAlgebra #Tridiagonalを使うために必要 function main() function matvec(A,x) y = zeros(A.n); for col = 1 : A.n idx = A.colptr[col] for i = idx : (A.colptr[col + 1] - 1) y[A.rowval[i]] += A.nzval[i] * x[col] end end return y end n = 400000; #行列サイズ A = Tridiagonal(ones(n-1),-2ones(n),ones(n-1)); #三重対角行列 A = sparse(A); #疎行列に # あるいは最初から # A = spdiagm(1=\u0026gt;ones(n-1),0=\u0026gt;-2*ones(n),-1=\u0026gt;ones(n-1)) x = ones(n); @time matvec(A,x); #時間測定 end main() 計算時間は行列サイズ $n$ にほぼ比例するはずです（行列サイズが2倍になれば計算時間も約2倍）．\n","date":1643760813,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1643760813,"objectID":"cc63288a76990384ce24e8544e3353bc","permalink":"https://example.com/post/julia_mat_vec/","publishdate":"2022-02-02T09:13:33+09:00","relpermalink":"/post/julia_mat_vec/","section":"post","summary":"科学技術計算では行列ベクトル積が頻繁に登場し，これを効率よく計算することはとても重要です． 行列サイズ $n$ に対して計算量は $\\mathrm{O}(n^2)$ ですが，行列は疎行列（ほとんどの要素が $0$）であることが多く，定義通りに計算すると $0$ を掛けたり足したりする無駄な演算が多く発生してしまいます． 以下では疎行列とベクトルの積の計算について解説します． （もっとも，Juliaで行列ベクトル積 $A\\boldsymbol{b}$ を計算するには A*b と書けばよく，これは $A$ が疎行列の場合でも同様なので，疎行列のパッケージがあることさえ知っていれば実用上は十分なことが多いのですが，とはいえ，チューニングを行ったり，上三角部分など行列の一部とベクトルの積を計算したりしたいときには，疎行列とベクトルの積がどのように計算されているか理解しておくことが重要です．）\n","tags":["julia"],"title":"Juliaの行列ベクトル積について（疎行列編）","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"Matlabで図を描いたとき，通常，図の背景は白です．論文を書くときなどはこれで困らないのですが，スライドに貼り付けると，背景が「真っ白」ではない場合，少し微妙な出来栄えになってしまいます．\nそんなとき，背景が透明な図を描ければよいのですが，matlabの場合は次のように実現可能です．\nset(gcf, \u0026#39;Color\u0026#39;, \u0026#39;none\u0026#39;); % figureの背景を透明に設定 set(gca, \u0026#39;Color\u0026#39;, \u0026#39;none\u0026#39;); % axisの背景を透明に設定 set(gcf, \u0026#39;InvertHardCopy\u0026#39;, \u0026#39;off\u0026#39;); % figureの背景を白でコピーする設定を外す saveas(gcf, \u0026#39;test.pdf\u0026#39;); ","date":1643724272,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1643724272,"objectID":"ffb02f04500b56a878c4c48078e32d28","permalink":"https://example.com/post/matlab-transparency/","publishdate":"2022-02-01T23:04:32+09:00","relpermalink":"/post/matlab-transparency/","section":"post","summary":"Matlabで図を描いたとき，通常，図の背景は白です．論文を書くときなどはこれで困らないのですが，スライドに貼り付けると，背景が「真っ白」ではない場合，少し微妙な出来栄えになってしまいます．\n","tags":["matlab"],"title":"Matlabで描く図の背景の透明化","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"Matlabなどで図を描き，PDFで保存すると，想定外に余白が大きすぎることがあり，TeXで貼り付けるときに少々困ります．そんなときは，ターミナルから\npdfcrop test.pdf とすれば余白は最小化されます．なお，TeXをTeX Liveでインストールしていればpdfcropは標準でインストールされているはずです．\n（以下は何年も前の情報で，ここ数年，次のようなトラブルには遭遇していませんが，以前のwebページに載せていた情報をそのまま掲載します）\nこのpdfcropですが，ghostscript関係でエラーが起こることがあります．これは，TeXのインストール時に同時にインストールされるghostscriptとは別にhomebrewなどでghostscriptをインストールした場合に発生するようです．そんなときはターミナルから\nbrew link --overwrite ghostscript とすれば解決するようです．\n","date":1643680384,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1643680384,"objectID":"26e3dd9becb9c24f4f6d44e35f5c5251","permalink":"https://example.com/post/pdfcrop/","publishdate":"2022-02-01T10:53:04+09:00","relpermalink":"/post/pdfcrop/","section":"post","summary":"Matlabなどで図を描き，PDFで保存すると，想定外に余白が大きすぎることがあり，TeXで貼り付けるときに少々困ります．そんなときは，ターミナルから\npdfcrop test.pdf とすれば余白は最小化されます．なお，TeXをTeX Liveでインストールしていればpdfcropは標準でインストールされているはずです．\n","tags":["latex"],"title":"PDFの余白を小さくする","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"JuliaでLU分解を利用して連立一次方程式を数値計算するとき，枢軸選択 (pivoting) に注意する必要があります．みるべき情報はここですが，備忘録も兼ねてまとめておきます．\njulia\u0026gt; using LinearAlgebra julia\u0026gt; A = [0 0 2; 1 0 1 ; 2 -1 1] 3×3 Array{Int64,2}: 0 0 2 1 0 1 2 -1 1 julia\u0026gt; L, U = lu(A) # 素直にLU分解 LU{Float64,Array{Float64,2}} L factor: 3×3 Array{Float64,2}: 1.0 0.0 0.0 0.5 1.0 0.0 0.0 0.0 1.0 U factor: 3×3 Array{Float64,2}: 2.0 -1.0 1.0 0.0 0.5 0.5 0.0 0.0 2.0 julia\u0026gt; L*U 3×3 Array{Float64,2}: 2.0 -1.0 1.0 1.0 0.0 1.0 0.0 0.0 2.0 L*UがAと一致しません．そもそもAの (1,1) 成分が 0 ですから，通常のLU分解は初手から破綻してしまいます．では何が行われているかというと枢軸選択 (pivoting) が行われているわけです．要するに行の入れ替えが行われています．\njulia\u0026gt; L, U, p = lu(A) LU{Float64,Array{Float64,2}} L factor: 3×3 Array{Float64,2}: 1.0 0.0 0.0 0.5 1.0 0.0 0.0 0.0 1.0 U factor: 3×3 Array{Float64,2}: 2.0 -1.0 1.0 0.0 0.5 0.5 0.0 0.0 2.0 julia\u0026gt; p # 置換を表すベクトル 3-element Array{Int64,1}: 3 2 1 julia\u0026gt; b = [4;3;5] # 連立一次方程式の右辺ベクトル 3-element Array{Int64,1}: 4 3 5 julia\u0026gt; A\\b #　連立一次方程式の解 3-element Array{Float64,1}: 1.0 -1.0 2.0 julia\u0026gt; x1 = U\\(L\\b) # pivotingを無視して計算すると... 3-element Array{Float64,1}: 0.5 -0.5 2.5 julia\u0026gt; x2 = U\\(L\\b[p]) # pivotingを考慮して計算するにはこのようにすればよい 3-element Array{Float64,1}: 1.0 -1.0 2.0 置換を表す行列も簡単に取り出せます．\njulia\u0026gt; F = lu(A); julia\u0026gt; F.P 3×3 Array{Float64,2}: 0.0 0.0 1.0 0.0 1.0 0.0 1.0 0.0 0.0 julia\u0026gt; (F.P)*A - L*U 3×3 Array{Float64,2}: 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 なお，枢軸選択を無視してLU分解することも可能です．\njulia\u0026gt; lu(A,Val(false)) # A は上の3x3行列 ERROR: ZeroPivotException: factorization encountered one or more zero pivots. Consider switching to a pivoted LU factorization. 怒られます．(1,1) 成分が 0 なのですから当然です．しかし，枢軸選択を無視してもLU分解が動く例もあります．\njulia\u0026gt; A = [1 1; 2 1] # この行列に対して 2×2 Array{Int64,2}: 1 1 2 1 julia\u0026gt; L,U　= lu(A) #　LU分解すると LU{Float64,Array{Float64,2}} L factor: 2×2 Array{Float64,2}: 1.0 0.0 0.5 1.0 U factor: 2×2 Array{Float64,2}: 2.0 1.0 0.0 0.5 julia\u0026gt; L*U # 枢軸選択が適用されますが 2×2 Array{Float64,2}: 2.0 1.0 1.0 1.0 julia\u0026gt; L,U = lu(A,Val(false)) # このようにすれば，枢軸選択は適用されません LU{Float64,Array{Float64,2}} L factor: 2×2 Array{Float64,2}: 1.0 0.0 2.0 1.0 U factor: 2×2 Array{Float64,2}: 1.0 1.0 0.0 -1.0 julia\u0026gt; L*U # 実際に L*U が A に一致します 2×2 Array{Float64,2}: 1.0 1.0 2.0 1.0 あえて枢軸選択を行わないメリットはあまりないとは思いますが，例えば，matlabの素朴なLU分解と比較するときなどには lu(A,Val(false)) は役立つかもしれません．\n","date":1641194938,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1641194938,"objectID":"84a45c868bbb672e3e13be1184be24d9","permalink":"https://example.com/post/lu-julia/","publishdate":"2022-01-03T16:28:58+09:00","relpermalink":"/post/lu-julia/","section":"post","summary":"JuliaでLU分解を利用して連立一次方程式を数値計算するとき，枢軸選択 (pivoting) に注意する必要があります．みるべき情報はここですが，備忘録も兼ねてまとめておきます．\n","tags":["Julia","線形計算"],"title":"JuliaでLU分解するときの注意点","type":"post"},{"authors":["Yuto Miyatake"],"categories":[],"content":"2019年頃から個人のウェブページをMkDocsで作ってきましたが，Hugoを使ってリニューアルしました．MkDocsも十分使い勝手がよく，おそらくこれからも講義用のページはMkDocsで構成していく予定ですが，備忘録（メモ）をブログ形式で残したいと思い（日付を残したいのと，タグ付け機能を使いたいのが主な動機です），HugoのAcademicテーマを利用することにしました．\n","date":1641194293,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1641194293,"objectID":"6c8941b4f73f981b10aa75dc78543414","permalink":"https://example.com/post/initial/","publishdate":"2022-01-03T16:18:13+09:00","relpermalink":"/post/initial/","section":"post","summary":"2019年頃から個人のウェブページをMkDocsで作ってきましたが，Hugoを使ってリニューアルしました．MkDocsも十分使い勝手がよく，おそらくこれからも講義用のページはMkDocsで構成していく予定ですが，備忘録（メモ）をブログ形式で残したいと思い（日付を残したいのと，タグ付け機能を使いたいのが主な動機です），HugoのAcademicテーマを利用することにしました．","tags":[],"title":"ウェブページをリニューアルしました","type":"post"},{"authors":["Yuto Miyatake"],"categories":null,"content":" Create your slides in Markdown - click the Slides button to check out the example. Add the publication’s full text or supplementary notes here. You can use rich formatting such as including code, math, and images.\n","date":1554595200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1554595200,"objectID":"557dc08fd4b672a0c08e0a8cf0c9ff7d","permalink":"https://example.com/publication/preprint/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/preprint/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example preprint / working paper","type":"publication"},{"authors":[],"categories":[],"content":"Create slides in Markdown with Hugo Blox Builder Hugo Blox Builder | Documentation\nFeatures Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides Controls Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026#34;blueberry\u0026#34; if porridge == \u0026#34;blueberry\u0026#34;: print(\u0026#34;Eating...\u0026#34;) Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = ;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\nFragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}} Press Space to play!\nOne Two Three A fragment can accept two optional parameters:\nclass: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}} Press the S key to view the speaker notes!\nOnly the speaker can read these notes Press S key to view Themes black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026#34;/media/boards.jpg\u0026#34; \u0026gt;}} {{\u0026lt; slide background-color=\u0026#34;#0000FF\u0026#34; \u0026gt;}} {{\u0026lt; slide class=\u0026#34;my-style\u0026#34; \u0026gt;}} Custom CSS Example Let’s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; } Questions? Ask\nDocumentation\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1549324800,"objectID":"0e6de1a61aa83269ff13324f3167c1a9","permalink":"https://example.com/slides/example/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/slides/example/","section":"slides","summary":"An introduction to using Hugo Blox Builder's Slides feature.","tags":[],"title":"Slides","type":"slides"},{"authors":null,"categories":null,"content":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"e8f8d235e8e7f2efd912bfe865363fc3","permalink":"https://example.com/project/example/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/example/","section":"project","summary":"An example of using the in-built project page.","tags":["Deep Learning"],"title":"Example Project","type":"project"},{"authors":null,"categories":null,"content":"","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"d1311ddf745551c9e117aa4bb7e28516","permalink":"https://example.com/project/external-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/external-project/","section":"project","summary":"An example of linking directly to an external project website using `external_link`.","tags":["Demo"],"title":"External Project","type":"project"},{"authors":["Yuto Miyatake","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software. Create your slides in Markdown - click the Slides button to check out the example. Add the publication’s full text or supplementary notes here. You can use rich formatting such as including code, math, and images.\n","date":1441065600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1441065600,"objectID":"966884cc0d8ac9e31fab966c4534e973","permalink":"https://example.com/publication/journal-article/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/journal-article/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example journal article","type":"publication"},{"authors":["Yuto Miyatake","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software. Create your slides in Markdown - click the Slides button to check out the example. Add the publication’s full text or supplementary notes here. You can use rich formatting such as including code, math, and images.\n","date":1372636800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1372636800,"objectID":"69425fb10d4db090cfbd46854715582c","permalink":"https://example.com/publication/conference-paper/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/conference-paper/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":[],"title":"An example conference paper","type":"publication"}]